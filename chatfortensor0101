-- Universal Chat GUI Script (Black & White RAGE Edition)
-- Creator: tensor0101 (Discord: tensor0101)
-- Фичи: локальный чат, ч/б тема, мигающая обводка, сворачивание, звук.

local player = game:GetService("Players").LocalPlayer
local gui = Instance.new("ScreenGui")
gui.Name = "ChatGUI_BW"
gui.Parent = player:WaitForChild("PlayerGui")
gui.ResetOnSpawn = false

-- Сервисы
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local ChatService = game:GetService("Chat")

-- Отключаем стандартный чат (если поддерживается)
pcall(function() ChatService:DisableChatWindows() end)

-- Звук уведомления
local sound = Instance.new("Sound")
sound.SoundId = "rbxasset://sounds/notification.mp3"
sound.Volume = 0.5
sound.Parent = gui

-- Настройки окна
local isMinimized = false
local originalSize = UDim2.new(0, 400, 0, 330)
local minimizedSize = UDim2.new(0, 400, 0, 40)

-- Основное окно
local frame = Instance.new("Frame")
frame.Size = originalSize
frame.Position = UDim2.new(0.5, -200, 0.5, -165)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)  -- тёмно-серый
frame.BackgroundTransparency = 0.2
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = false
frame.Parent = gui

-- Обводка с миганием (ч/б)
local border = Instance.new("Frame")
border.Size = UDim2.new(1, 6, 1, 6)
border.Position = UDim2.new(0, -3, 0, -3)
border.BackgroundTransparency = 1
border.BorderSizePixel = 2
border.BorderColor3 = Color3.fromRGB(255, 255, 255)
border.BorderTransparency = 0.5
border.Parent = frame

local function animateBorder()
    while border and border.Parent do
        for _, color in ipairs({Color3.fromRGB(255,255,255), Color3.fromRGB(0,0,0)}) do
            local tweenInfo = TweenInfo.new(1, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut)
            local goal = {BorderColor3 = color, BorderTransparency = 0.2}
            local tween = TweenService:Create(border, tweenInfo, goal)
            tween:Play()
            wait(1)
        end
    end
end
coroutine.wrap(animateBorder)()

-- Плавное перетаскивание
local dragging = false
local dragInput, dragStart, startPos

frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = frame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

frame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

RunService.RenderStepped:Connect(function()
    if dragging and dragInput then
        local delta = dragInput.Position - dragStart
        frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Скругление углов
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = frame

-- Заголовок (чёрно-белый)
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundColor3 = Color3.fromRGB(20, 20, 20)  -- почти чёрный
title.BackgroundTransparency = 0.3
title.BorderSizePixel = 0
title.Text = "  RAGE Chat — tensor0101"
title.TextColor3 = Color3.fromRGB(255, 255, 255)    -- белый
title.TextXAlignment = Enum.TextXAlignment.Left
title.Font = Enum.Font.GothamSemibold
title.TextSize = 16
title.Parent = frame

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 8)
titleCorner.Parent = title

-- Кнопка закрытия (чёрная с белым текстом)
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0, 30, 0, 30)
closeBtn.Position = UDim2.new(1, -30, 0, 0)
closeBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)      -- чёрный
closeBtn.BackgroundTransparency = 0.3
closeBtn.BorderSizePixel = 0
closeBtn.Text = "X"
closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)      -- белый
closeBtn.TextSize = 18
closeBtn.Font = Enum.Font.GothamBold
closeBtn.Parent = frame

closeBtn.MouseButton1Click:Connect(function()
    gui:Destroy()
end)

-- Кнопка сворачивания (серая)
local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Size = UDim2.new(0, 30, 0, 30)
minimizeBtn.Position = UDim2.new(1, -60, 0, 0)
minimizeBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)  -- серый
minimizeBtn.BackgroundTransparency = 0.3
minimizeBtn.BorderSizePixel = 0
minimizeBtn.Text = "–"
minimizeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)      -- белый
minimizeBtn.TextSize = 18
minimizeBtn.Font = Enum.Font.GothamBold
minimizeBtn.Parent = frame

minimizeBtn.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized
    local targetSize = isMinimized and minimizedSize or originalSize
    local tween = TweenService:Create(frame, TweenInfo.new(0.3), {Size = targetSize})
    tween:Play()
    
    chatList.Visible = not isMinimized
    inputBox.Visible = not isMinimized
    sendBtn.Visible = not isMinimized
    creditLabel.Visible = not isMinimized
end)

-- Область чата
local chatList = Instance.new("ScrollingFrame")
chatList.Size = UDim2.new(1, -20, 1, -110)
chatList.Position = UDim2.new(0, 10, 0, 40)
chatList.BackgroundColor3 = Color3.fromRGB(40, 40, 40)  -- тёмно-серый
chatList.BackgroundTransparency = 0.2
chatList.BorderSizePixel = 0
chatList.CanvasSize = UDim2.new(0, 0, 0, 0)
chatList.ScrollBarThickness = 8
chatList.AutomaticCanvasSize = Enum.AutomaticSize.Y
chatList.Parent = frame

local listCorner = Instance.new("UICorner")
listCorner.CornerRadius = UDim.new(0, 6)
listCorner.Parent = chatList

local layout = Instance.new("UIListLayout")
layout.Padding = UDim.new(0, 5)
layout.HorizontalAlignment = Enum.HorizontalAlignment.Left
layout.VerticalAlignment = Enum.VerticalAlignment.Top
layout.Parent = chatList

-- Поле ввода
local inputBox = Instance.new("TextBox")
inputBox.Size = UDim2.new(1, -90, 0, 30)
inputBox.Position = UDim2.new(0, 10, 1, -70)
inputBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)  -- серый
inputBox.BackgroundTransparency = 0.2
inputBox.BorderSizePixel = 0
inputBox.PlaceholderText = "Введите сообщение..."
inputBox.Text = ""
inputBox.TextColor3 = Color3.fromRGB(255, 255, 255)      -- белый
inputBox.TextSize = 14
inputBox.Font = Enum.Font.Gotham
inputBox.ClearTextOnFocus = false
inputBox.Parent = frame

local inputCorner = Instance.new("UICorner")
inputCorner.CornerRadius = UDim.new(0, 6)
inputCorner.Parent = inputBox

-- Кнопка отправки (белая с чёрным текстом)
local sendBtn = Instance.new("TextButton")
sendBtn.Size = UDim2.new(0, 70, 0, 30)
sendBtn.Position = UDim2.new(1, -80, 1, -70)
sendBtn.BackgroundColor3 = Color3.fromRGB(255, 255, 255)  -- белый
sendBtn.BackgroundTransparency = 0.2
sendBtn.BorderSizePixel = 0
sendBtn.Text = "Отправить"
sendBtn.TextColor3 = Color3.fromRGB(0, 0, 0)              -- чёрный
sendBtn.TextSize = 14
sendBtn.Font = Enum.Font.GothamSemibold
sendBtn.Parent = frame

local sendCorner = Instance.new("UICorner")
sendCorner.CornerRadius = UDim.new(0, 6)
sendCorner.Parent = sendBtn

-- Надпись с автором
local creditLabel = Instance.new("TextLabel")
creditLabel.Size = UDim2.new(1, -20, 0, 20)
creditLabel.Position = UDim2.new(0, 10, 1, -30)
creditLabel.BackgroundTransparency = 1
creditLabel.Text = "Создатель: tensor0101 (Discord: tensor0101)"
creditLabel.TextColor3 = Color3.fromRGB(180, 180, 180)    -- светло-серый
creditLabel.TextSize = 12
creditLabel.Font = Enum.Font.Gotham
creditLabel.TextXAlignment = Enum.TextXAlignment.Center
creditLabel.Parent = frame

-- Функция добавления сообщения
local function addMessage(text)
    local msg = Instance.new("TextLabel")
    msg.Size = UDim2.new(1, -10, 0, 20)
    msg.BackgroundTransparency = 1
    msg.Text = text
    msg.TextColor3 = Color3.fromRGB(255, 255, 255)          -- белый
    msg.TextSize = 14
    msg.Font = Enum.Font.Gotham
    msg.TextXAlignment = Enum.TextXAlignment.Left
    msg.Parent = chatList
end

-- Функция показа уведомления
local function showNotification(sender, message)
    local notification = Instance.new("Frame")
    notification.Size = UDim2.new(0, 250, 0, 60)
    notification.Position = UDim2.new(1, -260, 1, -80)
    notification.BackgroundColor3 = Color3.fromRGB(20, 20, 20)  -- чёрный
    notification.BackgroundTransparency = 0.3
    notification.BorderSizePixel = 0
    notification.Parent = gui

    local notifCorner = Instance.new("UICorner")
    notifCorner.CornerRadius = UDim.new(0, 8)
    notifCorner.Parent = notification

    local notifText = Instance.new("TextLabel")
    notifText.Size = UDim2.new(1, -10, 1, -10)
    notifText.Position = UDim2.new(0, 5, 0, 5)
    notifText.BackgroundTransparency = 1
    notifText.Text = sender .. ": " .. message
    notifText.TextColor3 = Color3.fromRGB(255, 255, 255)        -- белый
    notifText.TextSize = 14
    notifText.Font = Enum.Font.Gotham
    notifText.TextWrapped = true
    notifText.TextXAlignment = Enum.TextXAlignment.Left
    notifText.TextYAlignment = Enum.TextYAlignment.Top
    notifText.Parent = notification

    -- Анимация
    local fadeIn = TweenService:Create(notification, TweenInfo.new(0.3), {BackgroundTransparency = 0.3})
    fadeIn:Play()
    wait(3)
    local fadeOut = TweenService:Create(notification, TweenInfo.new(0.5), {BackgroundTransparency = 1})
    fadeOut:Play()
    fadeOut.Completed:Connect(function()
        notification:Destroy()
    end)
end

-- Отправка сообщения
local function sendMessage()
    local text = inputBox.Text
    if text ~= "" then
        local fullMessage = player.Name .. ": " .. text
        addMessage(fullMessage)
        showNotification(player.Name, text)
        sound:Play()  -- звук при отправке
        inputBox.Text = ""
    end
end

sendBtn.MouseButton1Click:Connect(sendMessage)
inputBox.FocusLost:Connect(function(enter)
    if enter then sendMessage() end
end)

-- Приветствие
addMessage("Добро пожаловать. Чёрно-белый RAGE чат.")
